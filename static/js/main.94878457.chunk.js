(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(24)},16:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){},22:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),l=a.n(i),o=(a(16),a(1)),c=a(2),s=a(4),d=a(3),h=a(5),u=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onImgLoad",value:function(){var e=this,t=new Image;t.src=this.props.fileUrl;var a=document.getElementById("PreEditorCanvas"),n=a.getContext("2d");t.onload=function(){a.height=t.height/2,a.width=t.width/2,n.clearRect(0,0,a.width,a.height);var r=a.width,i=a.height;n.drawImage(t,0,0,r,i),t.style.display="none",e.props.outputHandler({preEditUrl:a.toDataURL(),width:a.width,height:a.height})}}},{key:"componentDidUpdate",value:function(e){this.props.fileUrl!==e.fileUrl&&this.onImgLoad()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("canvas",{id:"PreEditorCanvas"}))}}]),t}(n.Component),m=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("input",{id:this.props.name,type:"range",min:this.props.min,max:this.props.max,defaultValue:this.props.defaultValue,onChange:function(){e.props.handler()}}))}}]),t}(n.Component),p=function(e,t){t?(e.imageSmoothingEnabled=!0,e.mozImageSmoothingEnabled=!0,e.webkitImageSmoothingEnabled=!0,e.msImageSmoothingEnabled=!0):(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1)},g=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={defaultScale:5,scale:5},a.handleSlider=function(){a.setState({scale:document.getElementById("scaleSlider").value}),a.onImgLoad()},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onImgLoad",value:function(){var e=this,t=new Image;t.src=this.props.fileUrl;var a=document.getElementById("PixelatorCanvas");t.onload=function(){var n=t.width,r=t.height;a.width=t.width,a.height=t.height;var i=a.getContext("2d");i.clearRect(0,0,a.width,a.height);var l=a.width/e.state.scale,o=a.height/e.state.scale;a.width=l,a.height=o,p(i,!0),i.drawImage(t,0,0,l,o),e.props.outputHandler({pixelUrl:a.toDataURL()}),a.width=n,a.height=r,p(i,!0),i.drawImage(t,0,0,l,o),t.style.display="none",p(i,!1),i.drawImage(a,0,0,l,o,0,0,a.width,a.height)}}},{key:"componentDidUpdate",value:function(e){this.props.fileUrl!==e.fileUrl&&(document.getElementById("scaleSlider").value=this.state.defaultScale,this.setState({scale:this.state.defaultScale}),this.onImgLoad())}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("canvas",{id:"PixelatorCanvas"}),r.a.createElement(m,{name:"scaleSlider",min:"1",max:"20",handler:this.handleSlider,defaultValue:this.state.defaultScale}))}}]),t}(n.Component),f=a(8),v=a.n(f),b=a(9),w=a.n(b),E=(a(18),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props.palette,t=[],a=[];for(var n in e)t.push([n,e[n][0],e[n][1],e[n][2]]);t.sort(function(e,t){return t[3]-e[3]});for(var i=0;i<t.length;i++){var l={backgroundColor:"#"+t[i][2],height:"20px",width:"40px"};a.push(r.a.createElement("div",{key:t[i],className:"paletteColor"},r.a.createElement("div",{style:l,className:"paletteBox"}),r.a.createElement("p",null,t[i][1]),r.a.createElement("p",null,"Count: "+t[i][3])))}return r.a.createElement("div",{className:"Palette"},a)}}]),t}(n.Component)),y=(a(20),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={colors:10,rgb_dmc:[],rgb_dmc_pure:[],defaultColors:50,palette:{}},a.handleSlider=function(){a.setState({colors:document.getElementById("colorSlider").value}),a.onImgLoad()},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onImgLoad",value:function(){var e=this,t=new Image;t.src=this.props.fileUrl;var a=document.getElementById("ColorMapperCanvas"),n=a.getContext("2d");t.onload=function(){a.width=e.props.initWidth,a.height=e.props.initHeight;var r=new w.a({colors:e.state.colors,palette:e.state.rgb_dmc_pure,reIndex:!1,method:1});r.sample(t);var i=new Uint8ClampedArray(r.reduce(t));n.drawImage(t,0,0);for(var l=new ImageData(i,t.width,t.height),o={},c=0;c<i.length;c+=4)for(var s=i[c+0],d=i[c+1],h=i[c+2],u=0;u<e.state.rgb_dmc.length;u+=1){var m=e.state.rgb_dmc[u][2],g=e.state.rgb_dmc[u][3],f=e.state.rgb_dmc[u][4];s-m===0&&d-g===0&&h-f===0&&(e.state.rgb_dmc[u][0]in o?o[e.state.rgb_dmc[u][0]][2]++:o[e.state.rgb_dmc[u][0]]=[e.state.rgb_dmc[u][1],e.state.rgb_dmc[u][5],1])}e.setState({palette:o}),n.putImageData(l,0,0),p(n,!1),n.drawImage(a,0,0,t.width,t.height,0,0,e.props.initWidth,e.props.initHeight)}}},{key:"componentDidMount",value:function(){var e=this;v.a.parse("/assets/rgb_to_dmc.csv",{download:!0,complete:function(t){e.setState({rgb_dmc:t.data.slice(1)});var a=e.state.rgb_dmc.map(function(e){return e.slice(2,5)});e.setState({rgb_dmc_pure:a})}})}},{key:"componentDidUpdate",value:function(e){this.props.fileUrl!==e.fileUrl&&(document.getElementById("colorSlider").value=this.state.defaultColors,this.setState({colors:this.state.defaultColors}),this.onImgLoad())}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"PicPalette"},r.a.createElement("canvas",{id:"ColorMapperCanvas"}),r.a.createElement(E,{palette:this.state.palette})),r.a.createElement(m,{name:"colorSlider",min:"5",max:"100",handler:this.handleSlider,defaultValue:this.state.defaultColors}))}}]),t}(n.Component)),j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={width:0,height:0,fileUrl:"",preEditUrl:"",pixelUrl:""},a.handleFile=function(e){var t=document.getElementById("img_upload").files[0];t&&a.setState({fileUrl:window.URL.createObjectURL(t)})},a.outputHandler=function(e){a.setState(e)},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"img_upload",accept:"image/*",onChange:function(){e.handleFile()}}),r.a.createElement(u,{fileUrl:this.state.fileUrl,outputHandler:this.outputHandler}),r.a.createElement(g,{fileUrl:this.state.preEditUrl,outputHandler:this.outputHandler}),r.a.createElement(y,{fileUrl:this.state.pixelUrl,outputHandler:this.outputHandler,initWidth:this.state.width,initHeight:this.state.height}))}}]),t}(n.Component),O=(a(22),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(j,null))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,2,1]]]);
//# sourceMappingURL=main.94878457.chunk.js.map