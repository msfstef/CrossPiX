(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(7),r=a.n(o),l=(a(15),a(1)),c=a(2),d=a(4),h=a(3),s=a(5),u=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"onImgLoad",value:function(){var e=this,t=new Image;t.src=this.props.fileUrl;var a=document.getElementById("PreEditorCanvas"),n=a.getContext("2d");t.onload=function(){a.height=t.height/2,a.width=t.width/2,n.clearRect(0,0,a.width,a.height);var i=a.width,o=a.height;n.drawImage(t,0,0,i,o),t.style.display="none",e.props.outputHandler({preEditUrl:a.toDataURL(),width:a.width,height:a.height})}}},{key:"componentDidUpdate",value:function(e){this.props.fileUrl!==e.fileUrl&&this.onImgLoad()}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("canvas",{id:"PreEditorCanvas"}))}}]),t}(n.Component),m=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("input",{id:this.props.name,type:"range",min:"1",max:"20",defaultValue:this.props.defaultScale,onChange:function(){e.props.handler()}}))}}]),t}(n.Component),g=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={defaultScale:5,scale:5},a.handleSlider=function(){a.setState({scale:document.getElementById("scaleSlider").value}),a.onImgLoad()},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"onImgLoad",value:function(){var e=this,t=new Image;t.src=this.props.fileUrl;var a=document.getElementById("PixelatorCanvas");t.onload=function(){var n=t.width,i=t.height;a.width=t.width,a.height=t.height;var o=a.getContext("2d");o.clearRect(0,0,a.width,a.height);var r=a.width/e.state.scale,l=a.height/e.state.scale;a.width=r,a.height=l,p(o,!0),o.drawImage(t,0,0,r,l),e.props.outputHandler({pixelUrl:a.toDataURL()}),a.width=n,a.height=i,p(o,!0),o.drawImage(t,0,0,r,l),t.style.display="none",p(o,!1),o.drawImage(a,0,0,r,l,0,0,a.width,a.height)}}},{key:"componentDidUpdate",value:function(e){this.props.fileUrl!==e.fileUrl&&(document.getElementById("scaleSlider").value=this.state.defaultScale,this.setState({scale:this.state.defaultScale}),this.onImgLoad())}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("canvas",{id:"PixelatorCanvas"}),i.a.createElement(m,{name:"scaleSlider",handler:this.handleSlider,defaultScale:this.state.defaultScale}))}}]),t}(n.Component),p=function(e,t){t?(e.imageSmoothingEnabled=!0,e.mozImageSmoothingEnabled=!0,e.webkitImageSmoothingEnabled=!0,e.msImageSmoothingEnabled=!0):(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1)},f=a(8),b=a.n(f),v=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).rgb_dmc=[],a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"onImgLoad",value:function(){var e=this,t=new Image;t.src=this.props.fileUrl;var a=document.getElementById("ColorMapperCanvas"),n=a.getContext("2d");t.onload=function(){a.width=e.props.initWidth,a.height=e.props.initHeight,w(n,!1),n.drawImage(t,0,0);for(var i=n.getImageData(0,0,t.width,t.height),o=0;o<i.data.length;o+=4){for(var r=i.data[o+0],l=i.data[o+1],c=i.data[o+2],d=1e3,h=0,s=0;s<e.rgb_dmc.length;s+=1){var u=e.rgb_dmc[s][2],m=e.rgb_dmc[s][3],g=e.rgb_dmc[s][4],p=Math.sqrt(Math.pow(r-u,2)+Math.pow(l-m,2)+Math.pow(c-g,2));p<d&&(d=p,h=s)}i.data[o+0]=e.rgb_dmc[h][2],i.data[o+1]=e.rgb_dmc[h][3],i.data[o+2]=e.rgb_dmc[h][4]}console.log(i),n.putImageData(i,0,0),w(n,!1),n.drawImage(a,0,0,t.width,t.height,0,0,e.props.initWidth,e.props.initHeight)}}},{key:"componentDidMount",value:function(){var e=this;b.a.parse("/assets/rgb_to_dmc.csv",{download:!0,complete:function(t){e.rgb_dmc=t.data.slice(1)}})}},{key:"componentDidUpdate",value:function(e){this.props.fileUrl!==e.fileUrl&&this.onImgLoad()}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("canvas",{id:"ColorMapperCanvas"}))}}]),t}(n.Component),w=function(e,t){t?(e.imageSmoothingEnabled=!0,e.mozImageSmoothingEnabled=!0,e.webkitImageSmoothingEnabled=!0,e.msImageSmoothingEnabled=!0):(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1)},E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={width:0,height:0,fileUrl:"",preEditUrl:"",pixelUrl:""},a.handleFile=function(e){var t=document.getElementById("img_upload").files[0];t&&a.setState({fileUrl:window.URL.createObjectURL(t)})},a.outputHandler=function(e){a.setState(e)},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("input",{type:"file",id:"img_upload",accept:"image/*",onChange:function(){e.handleFile()}}),i.a.createElement(u,{fileUrl:this.state.fileUrl,outputHandler:this.outputHandler}),i.a.createElement(g,{fileUrl:this.state.preEditUrl,outputHandler:this.outputHandler}),i.a.createElement(v,{fileUrl:this.state.pixelUrl,outputHandler:this.outputHandler,initWidth:this.state.width,initHeight:this.state.height}))}}]),t}(n.Component),I=(a(17),function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(E,null))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,a){e.exports=a(19)}},[[9,2,1]]]);
//# sourceMappingURL=main.fefbf8c4.chunk.js.map